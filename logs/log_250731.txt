프로젝트 : 영업관리용 DB 파이프라인 설계 및 구현

# Overview
- Workflow 정리 완료
- db_schema.py 업데이트

# Schema 설정 관련 고민과 진행상황 (2025-07-31)

## 주요 변경사항 (commit: cd04592)

### 1. 기존 테이블 구조 개선
- **타임스탬프 필드 추가**: 모든 테이블에 `created_at`, `updated_at`, `is_deleted` 추가
- **소프트 삭제 구현**: `is_deleted` 플래그로 데이터 물리적 삭제 방지
- **국가 코드 표준화**: Companies 테이블에 `nationality` 필드 추가 (ISO alpha-3 형식)

### 2. Products 테이블 가격 정책 변경
- 기존: `unit_price` (고정 가격)
- 변경: `min_price`, `max_price` (가격 범위)
- 이유: 제품별 협상 가능한 가격대 반영 필요

### 3. Projects 테이블 확장
- **기술 정보 필드 추가**: `application`, `ai_model`, `requirement`
- **연락처 연결**: `contact_id` 외래키 추가
- **메모 필드**: 자유 기록용 `memo` 필드 추가

### 4. Tasks 테이블 상태 관리 개선
- **상태 표준화**: `task_status`를 INTEGER로 변경 (0: 미실행, 1: 완료)
- **작업 유형 분류**: `task_type` 필드로 meeting/contact/quote/trial 등 구분
- **우선순위 추가**: `priority` 필드 (0: 낮음, 1: 보통, 2: 높음)
- **Invoice 연결**: `invoice_id` 외래키로 청구 관련 작업 추적

### 5. 신규 테이블 추가

#### First_Contact_Logs
- **목적**: 최초 접촉 이력 관리 (인바운드/콜드콜/전시 등)
- **핵심 필드**: `contact_type`, `channel`, `contact_date`
- **프로젝트 전환 추적**: `project_id`로 리드 전환율 분석 가능

#### Free_Trials
- **목적**: 무상 대여 관리
- **Tasks와 1:1 연결**: `task_id`를 Primary Key로 사용
- **전환율 추적**: `is_converted` 플래그로 구매 전환 여부 관리

#### Tech_Inquiries
- **목적**: 기술 문의 및 지원 이력
- **Tasks와 연계**: 문의 처리 과정을 Task로 관리
- **해결 상태**: `is_resolved` 플래그로 처리 완료 여부 추적

### 6. 성능 최적화
- **인덱스 추가**: 자주 조회되는 필드들에 인덱스 생성
- **외래키 인덱스**: Tasks, Invoices, First_Contact_Logs 등 주요 연결 테이블

### 7. 다국어 지원 준비
- **NATIONALITY_MAP**: 국가 코드를 한글/영어로 표시하는 매핑 테이블
- **INVOICE_STATUS**: 청구서 상태를 다국어로 표시하는 매핑 테이블

## 설계 철학
1. **데이터 무결성**: 외래키 제약조건과 체크 제약조건 활용
2. **확장성**: 새로운 비즈니스 요구사항에 대응 가능한 유연한 구조
3. **추적 가능성**: 모든 데이터 변경 이력과 생성/수정 시점 기록
4. **성능**: 실제 조회 패턴을 고려한 인덱스 설계

## 향후 고려사항
- 대용량 데이터 처리를 위한 파티셔닝 전략
- 실시간 대시보드를 위한 집계 테이블 설계
- API 연동을 위한 JSON 필드 활용 검토
